name: Terraform Tests

on: push

jobs:
    terraform:
        runs-on: ubuntu-latest
        env:
            AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
            AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        steps:
          - name: Checkout repo
            uses: actions/checkout@v3

          - name: Setup Terraform
            uses: hashicorp/setup-terraform@v2
            with:
                terraform_version: 1.6.0

          - name: Terraform Init
            uses: terraform init

          - name: Terraform Plan
            uses: terraform plan

          - name: Terraform Apply
            uses: terraform apply -auto-approve

          

